# Dairy Report App 画面レベル完全モックUI設計（仕様書）

## 1. 目的と方針
- 本仕様は **画面レベルの完全モック** を対象とする（本番API連携なし）。
- スタッフは **スマホ最優先UI**、SVは **PC想定UI** を基本とする。
- 日報入力は 5〜10分で完了できること、途中離脱復帰できることを重視する。
- データ保持はモック実装として `localStorage` を許容する。

---

## 2. 画面一覧（URL設計）

### スタッフ側（共通URL）
- `/` ホーム
- `/report/today` 日報ステップ入力（1/6〜6/6）
- `/reports/me` 自分の日報履歴（モック）
- `/knowledge` ナレッジ一覧

### SV側（別URL＋PIN）
- `/sv` SV PIN認証
- `/sv/dashboard` SVダッシュボード
- `/sv/reports` SV日報一覧
- `/sv/report/[id]` SV日報詳細＋評価
- `/sv/staff-directory` スタッフ名簿管理
- `/sv/knowledge` SVナレッジ管理

---

## 3. ナビゲーション仕様

### 3.1 スタッフ側ナビ（スマホ）
- 画面下部に固定タブ
  - `ホーム`（`/`）
  - `日報`（`/report/today`）
  - `ナレッジ`（`/knowledge`）
- `日報`タブは未入力時にバッジ表示（例: 赤点）。

### 3.2 SV側ナビ（PC）
- 左サイドバー（推奨）または上部ナビ
  - ダッシュボード
  - 日報一覧
  - ナレッジ
  - スタッフ名簿
- 画面右上にSV状態（PIN認証済み）を表示。

---

## 4. スタッフ側 画面仕様

## A. ホーム `/`
**目的**：迷わず入力開始

### UIブロック
1. **大ボタン（最優先）**
   - 未入力時: 「今日の日報を入力」（強調）
   - 入力済み時: 「今日の日報を編集」
2. **成長メーター（小カード）**
   - 今週ゲージ（例: `■■■□□`）
   - 今月S評価数
   - ナレッジ化数
3. **ナレッジ入口（小カード）**
   - CTA: 「最新ナレッジを見る →」
   - 最新1件タイトルを1行表示
4. **SVコメント（任意）**
   - 最新1件のみ表示

## B. 日報ステップ入力 `/report/today`
**目的**：5〜10分で入力完了・途中離脱可

### 共通UI
- 上部: ステップインジケータ（1/6 形式 or ドット）
- 下部固定: `戻る` / `次へ`（最終は `提出`）
- 自動保存: ステップ遷移時・入力停止時に下書き保存

### STEP1 基本情報（必須）
- 稼働日（初期値: 今日）
- スタッフ名（スタッフ名簿プルダウン）
- イベント会社（入力 or 選択）
- 店舗名 or イベント会場（**どちらか必須**）
- 写真添付（最大3枚、サムネイル、削除可）
- `次へ`押下時に `report_id` 発行（モックではUUID）

### STEP2 アプローチ（任意）
- 数値入力: 来店数 / キャッチ数 / 着座数 / 見込み
- 折りたたみ: 着座内訳
  - au/UQ既存
  - SB/YM
  - docomo/ahamo
  - 楽天
  - その他

### STEP3 新規獲得（任意）
- 折りたたみUI
- `au`
  - MNP SIM単
  - MNP HS
  - 純新規SIM単
  - 純新規HS
- `UQ`（上記と同様）

### STEP4 LTV獲得（任意）
- 折りたたみUI
- auひかり（新規 / d光 / SB光 / その他）
- BLひかり（同様）
- コミュファ光（同様）
- auでんき / ゴールドカード / シルバーカード

### STEP5 成功事例（任意）
- タイトル（20字目安）
- 客層（複数チップ）
  - 18歳以下 / ファミリー / シニア / 外国籍 / 乗り換え検討層 / 不明
- 来店目的（単一選択）
  - MNP検討 / 新規 / 機種変更 / 料金見直し / 光/でんき相談 / 手続き目的 / 立ち寄り
- 決め手トーク（短文）
- 効いた理由（任意）
- その他（任意）

### STEP6 失敗＋振り返り（任意）
- NGタイトル
- 原因タグ（選択）
  - ヒアリング不足 / ニーズ把握ミス / 提案順が悪い / 料金説明が弱い / 説明過多/長い / 価格を先に出した / クロージング弱い / 競合比較に負けた / 特典/条件の説明ミス / オペ遅れ / 会場導線が悪い / 声掛けタイミングミス / その他
- 次回どうする（1行）
- 所感（短文）
- 備考（任意）

### 最終提出
- `提出`押下で status を `submitted` に更新
- モックとして保存完了トーストを表示

## C. 自分の日報履歴 `/reports/me`
- 新着順リスト
- カード表示項目
  - 日付
  - 店舗/会場
  - ステータス（`draft` / `submitted` / `locked`）
  - `編集/閲覧` ボタン

## D. ナレッジ `/knowledge`
**目的**：シンプルに新着閲覧
- 新着順カード一覧
- カード項目
  - タイトル
  - 決め手トーク（1〜2行）
  - タグ
  - 日付
- 検索（タイトル/本文）
- タグ1つフィルタ（任意）

---

## 5. SV側 画面仕様

## E. SV PIN `/sv`
- 4桁PIN入力
- 成功: SV認証状態をモック保持（`localStorage` 可）
- 失敗: エラーメッセージ表示

## F. SVダッシュボード `/sv/dashboard`
**最優先**：未評価件数

1. 未評価日報（件数＋「未評価を見る」）
2. 解除申請（件数＋「申請を見る」）
3. 今日の提出数 / 提出率（小さめ表示）

## G. SV日報一覧 `/sv/reports`
- 表示切替（決定）: `カード` / `テーブル`
- フィルタ（MVP最小）
  - 未評価のみ
  - 解除申請あり
  - ロック中
  - 日付範囲（簡易）

### カード表示（スマホ）
- 表示: staff名 / 日付 / 店舗・会場 / 成功タイトル1行
- 状態バッジ
  - 未評価（赤）
  - 評価済（S/A/B/C）
- 解除申請バッジ

### テーブル表示（PC）
- 列: 日付 / スタッフ / 店舗 / 成功タイトル / 評価 / 解除申請 / 操作

## H. SV日報詳細 `/sv/report/[id]`
- 上部情報: スタッフ名 / 稼働日 / 店舗・会場 / ロック状態
- 本文: 折りたたみセクション
  - 情報
  - アプローチ
  - 獲得
  - 成功
  - 失敗
  - 所感
- SVアクションパネル（PC右側 / スマホ下部固定）
  - 評価ボタン `S A B C`
  - 固定タグ（複数チップ）
  - コメント（短文）
  - 添削トグル（ONで成功/失敗文面編集欄を表示）
  - 保存

### S評価時
- 「ナレッジ候補に追加されました」を表示
- モックで `knowledge_items` に追加

## I. ロック/解除・解除申請
- SV詳細画面に `ロック` / `解除` ボタン
- スタッフ側（ロック中）に `解除申請`
  - 理由（選択）
  - 任意メモ
- SV一覧フィルタに「解除申請あり」
- SV詳細で申請 `承認/却下`（モック）

## J. スタッフ名簿管理 `/sv/staff-directory`
- 追加フォーム
  - 名前（必須）
  - イベント会社（任意）
- 一覧に有効/無効トグル
- STEP1のスタッフプルダウンの参照元

## K. SVナレッジ管理 `/sv/knowledge`
- 新着順（S評価で追加）
- タグフィルタ / 検索
- 削除は非推奨（非表示 / アーカイブUI推奨）

---

## 6. 固定タグ（初期セット）

### スキル
- ヒアリング
- 仮説提案
- 料金訴求
- 価値訴求
- クロージング
- 切り返し
- 導線作り
- 第一声（キャッチ）

### 商材
- au MNP
- UQ MNP
- 純新規
- HS提案
- SIM単提案
- auひかり
- BLひかり
- コミュファ光
- auでんき
- ゴールドカード
- シルバーカード

### お客様タイプ
- 料金不満
- 端末重視
- 家族まとめ
- 通信品質重視
- 特典目的
- 乗り換え迷い

### 現場状況
- 催事
- 店頭
- 週末
- 平日
- 雨天

---

## 7. モックデータモデル（最小）

### 7.1 `reports`
- `id` (UUID)
- `date`
- `staff_id`
- `event_company`
- `location_type` (`store` | `venue`)
- `location_name`
- `photos[]`
- `steps` (2〜6の入力内容)
- `status` (`draft` | `submitted` | `locked`)
- `sv_review`
  - `grade` (`S` | `A` | `B` | `C` | `null`)
  - `tags[]`
  - `comment`
  - `edited_success_text`
  - `edited_failure_text`
- `unlock_request`
  - `requested` (boolean)
  - `reason`
  - `memo`
  - `decision` (`pending` | `approved` | `rejected`)

### 7.2 `staff_directory`
- `id`
- `name`
- `event_company` (optional)
- `active` (boolean)

### 7.3 `knowledge_items`
- `id`
- `source_report_id`
- `title`
- `winning_talk`
- `tags[]`
- `created_at`
- `archived` (boolean)

### 7.4 `sv_session`
- `is_authenticated` (boolean)
- `authenticated_at`

---

## 8. 状態遷移（モック）

### 日報
- `draft` → `submitted`（提出）
- `submitted` → `locked`（SVロック）
- `locked` → `submitted`（SV解除）

### 解除申請
- `pending` → `approved`（解除）
- `pending` → `rejected`（ロック継続）

### 評価
- 未評価（`grade=null`）→ `S/A/B/C`
- `S`時に `knowledge_items` 生成

---

## 9. バリデーション（MVP）
- STEP1必須
  - 稼働日
  - スタッフ名
  - イベント会社
  - 店舗名or会場名（いずれか）
- 写真: 最大3枚
- PIN: 4桁数字
- それ以外のステップは任意

---

## 10. 非機能/UXメモ（モック）
- 低負荷実装を優先（ローカル状態 + ローカル永続化）
- 主要アクションはトーストでフィードバック
- 長文入力欄は文字数目安のプレースホルダを付与
- 折りたたみの開閉状態は同ページ中のみ保持

